{"ast":null,"code":"import _regeneratorRuntime from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/khalil/Desktop/kataleya-front/website/src/containers/Cart/Cart.js\",\n    _s = $RefreshSig$();\n\n// export default Cart\nimport React, { useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport CookieService from '../Service/CookieService';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport 'reactjs-popup/dist/index.css';\nimport { useForm } from \"react-hook-form\";\nimport { green } from '@material-ui/core/colors';\nimport { blue } from '@material-ui/core/colors';\nimport { red } from '@material-ui/core/colors';\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Cart() {\n  _s();\n\n  const _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        Loading = _useState2[0],\n        setLoading = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        Editing = _useState4[0],\n        setEditing = _useState4[1];\n\n  const _useState5 = useState({\n    display: 'None',\n    color: 'red'\n  }),\n        _useState6 = _slicedToArray(_useState5, 2),\n        display = _useState6[0],\n        setdisplay = _useState6[1];\n\n  const _useState7 = useState(\"none\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        message = _useState8[0],\n        setmessage = _useState8[1];\n\n  const _useState9 = useState([]),\n        _useState10 = _slicedToArray(_useState9, 2),\n        cartItem = _useState10[0],\n        setCartItem = _useState10[1];\n\n  const cartItems = [];\n\n  function getArraySum(a) {\n    var total = 0;\n\n    for (var i in a) {\n      total += a[i];\n    }\n\n    return total;\n  }\n\n  const useStyles = makeStyles(theme => ({\n    formm: {\n      width: '100%',\n      // Fix IE 11 issue.\n      marginTop: theme.spacing(1)\n    },\n    rate: {\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    input: {\n      display: 'flex',\n      justifyContent: 'center',\n      marginBottom: '1%',\n      marginTop: '1%'\n    },\n    submit: {\n      marginLeft: '1%',\n      width: \"10%\",\n      color: theme.palette.getContrastText(green[500]),\n      backgroundColor: blue['#94aabe'],\n      '&:hover': {\n        backgroundColor: blue['#003366']\n      }\n    },\n    ItemsTable: {\n      color: 'green',\n      position: 'relative',\n      zIndex: '0',\n      width: '70%',\n      height: '70vh',\n      marginTop: '1%',\n      marginLeft: '0%'\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: 'green'\n    },\n    manageItems: {\n      /* backgroundColor: \"rgba(116, 255, 116, 0.145)\", */\n      height: '86vh'\n    }\n  }));\n  const classes = useStyles();\n  const cookie = CookieService.get('Bearer');\n\n  const HandleEdit = () => {\n    setEditing(!Editing);\n  };\n\n  useEffect(() => {\n    setLoading(false);\n    var configg = {\n      method: 'get',\n      url: 'http://localhost:8000/api/user/cartItem',\n      headers: {\n        'Authorization': \"Bearer \".concat(cookie),\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    };\n    axios(configg).then(res => {\n      // console.log(res.data,\"asdasd\");\n      setCartItem(res.data);\n    }).catch(err => {\n      console.log(err.request);\n    });\n  }, []);\n  const result = cartItem.map(({\n    price\n  }) => Number(price));\n  const result2 = cartItem.map(({\n    price,\n    quantity\n  }) => Number(price * quantity));\n  const overall_price = getArraySum(result); //////////////////////\n  /////////////////////\n  /////////////\n  //    const Update = async (id) => {\n  //      const fdd = new FormData();\n  //     fdd.append(\"quantity\",quantity)\n  //     fdd.append('price',200000)\n  //     let headers = {\n  //      method : 'POST',\n  //       data : fdd,\n  //       headers: {\n  //         'Authorization': `Bearer ${cookie}`,\n  //       }\n  //     };\n  //     axios(`http://localhost:8000/api/cartItem/${id}?_method=PUT`, headers)\n  //    .then(res => {\n  //        console.log(res)\n  //    })\n  //   .catch((error) => {\n  //    if(error.response){\n  //      console.log(error);\n  //    }\n  //   })\n  // }\n  // const num = cartItem.map(({ quantity}) =>Number(quantity));\n  // console.log(num)\n  //const [quantity, setQuantity] = useState(cartItem.map(({quantity}) =>Number(quantity)));\n\n  const _useState11 = useState({}),\n        _useState12 = _slicedToArray(_useState11, 2),\n        newItem = _useState12[0],\n        setNewItem = _useState12[1]; // const [disable, setDisable] = useState(cartItem.map(item => false));\n\n\n  const _useState13 = useState(1),\n        _useState14 = _slicedToArray(_useState13, 2),\n        count = _useState14[0],\n        setCount = _useState14[1];\n\n  function handleIncrement(id) {\n    setCount(prevCount => prevCount + 1);\n    let newCartItems = cartItem.map(item => {\n      if (item.id === id) {\n        setNewItem({\n          id: item.id,\n          quantity: item.quantity + count,\n          price: item.price,\n          bottle_size: item.bottle_size,\n          name: item.name,\n          image: item.image,\n          created_at: item.created_at,\n          updated_at: item.updated_at,\n          cart_id: item.cart_id,\n          item_id: item.item_id\n        });\n        return newItem;\n      } else {\n        return item;\n      }\n    });\n    console.log(count);\n    console.log(newCartItems);\n    return newCartItems.quantity;\n  } // const handleIncrement = (index) => {\n  //   console.log(index);\n  //   console.log(quantity);\n  //   quantity[index]++;\n  //     setQuantity([...quantity]);\n  //     disable[index] = false;\n  //     setDisable([...disable]);\n  // };\n  // const[newItem,setNewItem]=useState({})\n\n\n  const handleDecrement = id => {\n    //setQuantity(prevCount => prevCount - 1);\n    let newCartItems = cartItem.map(item => {\n      if (item.id === id) {\n        const newItem = {\n          id: item.id,\n          quantity: item.quantity - 1,\n          price: item.price,\n          bottle_size: item.bottle_size,\n          name: item.name,\n          image: item.image,\n          created_at: item.created_at,\n          updated_at: item.updated_at,\n          cart_id: item.cart_id,\n          item_id: item.item_id\n        };\n        return newItem;\n      } else {\n        return item;\n      }\n    });\n    console.log(newCartItems[id]);\n  }; /////////////////////\n\n\n  const DeleteItem = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var config;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            config = {\n              method: 'Delete',\n              url: \"http://localhost:8000/api/user/cartItem/\".concat(id),\n              headers: {\n                'Authorization': \"Bearer \".concat(cookie),\n                'Content-Type': 'application/x-www-form-urlencoded'\n              }\n            };\n            axios(config).then(res => {\n              console.log(res);\n              setCartItem(cartItem.filter(item => item.id !== id));\n            }).catch(err => {\n              console.log(err);\n            });\n            setLoading(false);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function DeleteItem(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const columns = [{\n    field: 'image',\n    headerName: 'Picture',\n    width: 120,\n    sortable: false,\n    renderCell: params => /*#__PURE__*/_jsxDEV(\"img\", {\n      style: {\n        width: '1',\n        height: '1'\n      },\n      alt: \"Remy Sharp\",\n      src: \"http://localhost:8000/storage/\".concat(params.row.image)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }, this)\n  }, {\n    field: 'name',\n    headerName: 'name',\n    width: 130\n  }, {\n    field: 'bottle_size',\n    headerName: 'bottle_size',\n    width: 130\n  }, {\n    field: 'price',\n    headerName: 'price',\n    width: 130\n  }, {\n    field: 'quantity',\n    headerName: 'quantity',\n    width: 130,\n    renderCell: params => /*#__PURE__*/_jsxDEV(ButtonGroup, {\n      size: \"small\",\n      \"aria-label\": \"small outlined button group\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          color: 'blue',\n          backgroundColor: 'white'\n        },\n        onClick: () => {\n          handleIncrement(params.row.id);\n        },\n        children: \"+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          color: 'black',\n          backgroundColor: 'white',\n          fontWeight: '30px'\n        },\n        disabled: true,\n        children: newItem.quantity\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          color: 'red',\n          backgroundColor: 'white'\n        },\n        onClick: () => {\n          handleDecrement(params.row.id);\n        },\n        children: \"-\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 5\n    }, this)\n  }, {\n    field: 'delete',\n    headerName: 'Remove',\n    sortable: false,\n    renderCell: params => /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => DeleteItem(params.row.id),\n      style: {\n        backgroundColor: '#F76363'\n      },\n      variant: \"contained\",\n      size: \"small\",\n      alt: \"Remy Sharp\",\n      children: \"Remove\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }, this)\n  }]; //     const Submit = async () => {\n  //       if(Verified === \"true\"){\n  //       const data = new FormData();\n  //       data.append(\"item_id\", ItemId);\n  //       data.append(\"cart_id\", CartId);\n  //       //data.append(\"price\", price);\n  //      data.append('price',price)\n  //       data.append(\"bottle_size\",size);\n  //       data.append(\"image\",image);\n  //       data.append('name',name);\n  //       try {\n  //         await axios.post(\"http://localhost:8000/api/user/cartItem\", data, {\n  //           headers: { \n  //             'Authorization': `Bearer ${cookie}`, \n  //             'Content-Type': 'application/x-www-form-urlencoded'\n  //           }\n  //         }).then((response) => {\n  //           setmessage(name + \" has been added\")\n  //           setdisplay({display: 'inline', color: 'green' })\n  //           console.log(response.data);\n  //         });\n  //       } catch (error) {\n  //         console.log(error);\n  //       }\n  //     }else{\n  //       window.alert(\"you must sign in to add to cart\");\n  //     };\n  // } ;\n\n  const _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        anchorEl = _React$useState2[0],\n        setAnchorEl = _React$useState2[1];\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  console.log(HandleEdit);\n\n  if (Loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Backdrop, {\n        className: classes.backdrop,\n        open: true,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"inherit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Your Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.manageItems,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.ItemsTable,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: display,\n            children: message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(DataGrid, {\n            rows: cartItem,\n            columns: columns,\n            pageSize: 8,\n            width: \"250px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Total Price:\", overall_price, \"LBP\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"button-profile\",\n        style: {\n          alignSelf: \"center\",\n          width: \"30%\",\n          color: \"black\",\n          backgroundColor: \"lightgray\"\n        },\n        edge: \"start\",\n        \"aria-label\": \"menu\",\n        \"aria-haspopup\": \"true\",\n        onClick: handleClick,\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true);\n  }\n}\n\n_s(Cart, \"5m62s9MProslvk5yk0hb7FyAoNc=\", false, function () {\n  return [useStyles];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["/home/khalil/Desktop/kataleya-front/website/src/containers/Cart/Cart.js"],"names":["React","useState","useEffect","DataGrid","makeStyles","Button","CookieService","Backdrop","CircularProgress","axios","useForm","green","blue","red","ButtonGroup","Cart","Loading","setLoading","Editing","setEditing","display","color","setdisplay","message","setmessage","cartItem","setCartItem","cartItems","getArraySum","a","total","i","useStyles","theme","formm","width","marginTop","spacing","rate","justifyContent","input","marginBottom","submit","marginLeft","palette","getContrastText","backgroundColor","ItemsTable","position","zIndex","height","backdrop","drawer","manageItems","classes","cookie","get","HandleEdit","configg","method","url","headers","then","res","data","catch","err","console","log","request","result","map","price","Number","result2","quantity","overall_price","newItem","setNewItem","count","setCount","handleIncrement","id","prevCount","newCartItems","item","bottle_size","name","image","created_at","updated_at","cart_id","item_id","handleDecrement","DeleteItem","config","filter","columns","field","headerName","sortable","renderCell","params","row","fontWeight","anchorEl","setAnchorEl","handleClick","event","currentTarget","alignSelf"],"mappings":"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","sourcesContent":["// export default Cart\nimport React, { useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport CookieService from '../Service/CookieService';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport 'reactjs-popup/dist/index.css';\nimport { useForm } from \"react-hook-form\";\nimport { green } from '@material-ui/core/colors';\nimport { blue } from '@material-ui/core/colors';\nimport { red} from '@material-ui/core/colors';\nimport ButtonGroup from \"@material-ui/core/ButtonGroup\";\nfunction Cart() {\n  const [Loading, setLoading] = useState(true)\n  const [Editing, setEditing] = useState(false)\n  const [display, setdisplay] = useState({display: 'None', color: 'red' });\n  const [message, setmessage] = useState(\"none\");\n  const[cartItem,setCartItem]=useState([]);\n  const cartItems=[];\n  function getArraySum(a){\n    var total=0;\n    for(var i in a) { \n        total += a[i];\n    }\n    return total;\n}\n\n\n\n    const useStyles = makeStyles((theme) => ({\n      formm: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n      },\n      rate:{\n        display: 'flex',\n        justifyContent: 'center',\n      },\n      input:{\n        display: 'flex',\n        justifyContent: 'center',\n        marginBottom:'1%',\n        marginTop:'1%'\n      },\n      submit: {\n        marginLeft:'1%',\n        width: \"10%\",\n        color: theme.palette.getContrastText(green[500]),\n        backgroundColor: blue['#94aabe'],\n        '&:hover': {\n          backgroundColor: blue['#003366'],\n        },\n      },\n        ItemsTable: {\n          color: 'green',\n          position: 'relative',\n          zIndex: '0',\n          width: '70%',\n          height: '70vh',\n          marginTop: '1%',\n          marginLeft: '0%',\n         \n        },\n        backdrop: {\n          zIndex: theme.zIndex.drawer + 1,\n          color: 'green',\n        },\n        manageItems : {\n          /* backgroundColor: \"rgba(116, 255, 116, 0.145)\", */\n          height : '86vh',\n        }\n      }));\n      const classes = useStyles();\n      const cookie = CookieService.get('Bearer');\n   const HandleEdit = () => {\n      setEditing(!Editing)\n    }\n  \n    useEffect( () => {\n      setLoading(false)\n      var configg = {\n        method: 'get',\n        url: 'http://localhost:8000/api/user/cartItem',\n        headers: { \n          'Authorization': `Bearer ${cookie}`, \n          'Content-Type': 'application/x-www-form-urlencoded'\n        }};\n           axios(configg)\n          .then(res => {\n                // console.log(res.data,\"asdasd\");\n              setCartItem(res.data)\n          }).catch(err => {\n            console.log(err.request)\n          })\n    },[]);\n    const result = cartItem.map(({ price }) =>Number(price));\n    const result2 = cartItem.map(({ price,quantity }) =>Number(price*quantity));\n   const  overall_price=getArraySum(result);\n   //////////////////////\n   /////////////////////\n   /////////////\n//    const Update = async (id) => {\n//      const fdd = new FormData();\n//     fdd.append(\"quantity\",quantity)\n//     fdd.append('price',200000)\n//     let headers = {\n//      method : 'POST',\n//       data : fdd,\n//       headers: {\n//         'Authorization': `Bearer ${cookie}`,\n//       }\n//     };\n//     axios(`http://localhost:8000/api/cartItem/${id}?_method=PUT`, headers)\n//    .then(res => {\n//        console.log(res)\n//    })\n//   .catch((error) => {\n//    if(error.response){\n//      console.log(error);\n//    }\n//   })\n// }\n\n// const num = cartItem.map(({ quantity}) =>Number(quantity));\n// console.log(num)\n //const [quantity, setQuantity] = useState(cartItem.map(({quantity}) =>Number(quantity)));\n const[newItem,setNewItem]=useState({})\n// const [disable, setDisable] = useState(cartItem.map(item => false));\nconst[count,setCount]=useState(1)\nfunction handleIncrement(id){\n  setCount(prevCount => prevCount+1);\n  let newCartItems = cartItem.map(item => {\n   \n          if (item.id === id) {\n             setNewItem  ({\n             id:item.id,\nquantity:item.quantity+count,\nprice:item.price,\nbottle_size:item.bottle_size,\nname:item.name,\nimage:item.image,\ncreated_at:item.created_at,\nupdated_at:item.updated_at,\ncart_id:item.cart_id,\nitem_id:item.item_id\n            });\n            return newItem;\n          }\n          else {return item;}}\n          );\n          console.log(count)\n          console.log(newCartItems);\n\n  return newCartItems.quantity\n\n}\n// const handleIncrement = (index) => {\n//   console.log(index);\n//   console.log(quantity);\n//   quantity[index]++;\n//     setQuantity([...quantity]);\n//     disable[index] = false;\n//     setDisable([...disable]);\n    \n// };\n\n// const[newItem,setNewItem]=useState({})\nconst handleDecrement = (id) => {\n  //setQuantity(prevCount => prevCount - 1);\n  let newCartItems = cartItem.map(item => {\n         \n    if (item.id === id) {\n       const newItem = {\n       id:item.id,\nquantity:item.quantity-1,\nprice:item.price,\nbottle_size:item.bottle_size,\nname:item.name,\nimage:item.image,\ncreated_at:item.created_at,\nupdated_at:item.updated_at,\ncart_id:item.cart_id,\nitem_id:item.item_id\n      };\n      return newItem;\n    }\n    else {return item;}}\n    );\n    console.log(newCartItems[id]);\n\n \n};\n  /////////////////////\n  const DeleteItem = async (id) => {\n      var config = {\n      method: 'Delete',\n      url: `http://localhost:8000/api/user/cartItem/${id}`,\n      headers: { \n        'Authorization': `Bearer ${cookie}`, \n        'Content-Type': 'application/x-www-form-urlencoded'\n      }};\n        axios(config)\n        .then(res => {\n          console.log(res)\n          setCartItem(cartItem.filter(item => item.id !== id))    \n        }).catch(err => {\n          console.log(err)\n        })\n        setLoading(false)\n  }\n    const columns = [\n        {\n            field: 'image',\n            headerName: 'Picture',\n            width: 120,\n            sortable: false,\n            renderCell: (params) => (\n                <img style={{width: '1', height: '1'}} alt=\"Remy Sharp\" src= {`http://localhost:8000/storage/${params.row.image}`}/>\n            ),\n        },\n        { field: 'name', headerName: 'name', width: 130 },\n  { field: 'bottle_size', headerName: 'bottle_size', width: 130 },\n  { field: 'price', headerName: 'price', width: 130 },\n  { field: 'quantity', headerName: 'quantity', width: 130,\n        renderCell:(params)=>(\n          \n           \n    <ButtonGroup size=\"small\" aria-label=\"small outlined button group\">\n        <Button style={{color:'blue', backgroundColor:'white'}} onClick={()=>{handleIncrement(params.row.id)}}>+</Button>\n         <Button style={{color:'black', backgroundColor:'white', fontWeight:'30px'}} disabled>{newItem.quantity}</Button>\n       <Button   style={{color:'red',backgroundColor:'white'}} onClick={()=>{handleDecrement(params.row.id)}}>-</Button>\n      </ButtonGroup>\n          \n          \n           \n          \n    ),\n    \n},\n     \n      {\n        field: 'delete',\n        headerName: 'Remove',\n        sortable: false,\n        renderCell: (params) => (\n            <Button onClick={()=> DeleteItem(params.row.id)} style={{backgroundColor: '#F76363'}} variant=\"contained\" size=\"small\" alt=\"Remy Sharp\">\n                Remove\n            </Button>\n        ),\n      },\n \n      \n    ];\n//     const Submit = async () => {\n//       if(Verified === \"true\"){\n//       const data = new FormData();\n//       data.append(\"item_id\", ItemId);\n//       data.append(\"cart_id\", CartId);\n//       //data.append(\"price\", price);\n//      data.append('price',price)\n//       data.append(\"bottle_size\",size);\n//       data.append(\"image\",image);\n//       data.append('name',name);\n//       try {\n//         await axios.post(\"http://localhost:8000/api/user/cartItem\", data, {\n//           headers: { \n//             'Authorization': `Bearer ${cookie}`, \n//             'Content-Type': 'application/x-www-form-urlencoded'\n//           }\n//         }).then((response) => {\n//           setmessage(name + \" has been added\")\n//           setdisplay({display: 'inline', color: 'green' })\n//           console.log(response.data);\n         \n//         });\n//       } catch (error) {\n//         console.log(error);\n//       }\n//     }else{\n//       window.alert(\"you must sign in to add to cart\");\n//     };\n    \n// } ;\nconst [anchorEl, setAnchorEl] = React.useState(null);\nconst handleClick = (event) => {\n  setAnchorEl(event.currentTarget);\n  \n\n};\n    console.log(HandleEdit)\n    if(Loading){\n      return (\n        <div>\n            <Backdrop className={classes.backdrop} open={true}>\n                <CircularProgress color=\"inherit\" />\n            </Backdrop>\n        </div>\n      )\n    }\n    else {\n  return (\n      <>\n    <p>Your Items</p>  \n    <div className={classes.manageItems} >\n    <div className={classes.ItemsTable} >\n    {<span style={display}>{message}</span>}\n      <DataGrid rows={cartItem} columns={columns} pageSize={8} width=\"250px\"/>\n    </div>\n    </div>\n    <div>Total Price:{overall_price}LBP</div>\n    <Button className=\"button-profile\"  style={{ alignSelf:\"center\", width:\"30%\", color:\"black\", backgroundColor:\"lightgray\" }} edge=\"start\" aria-label=\"menu\" aria-haspopup=\"true\" onClick={handleClick} >\n             Checkout\n             </Button>\n    </>\n  );\n    }\n}\n\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}