{"ast":null,"code":"import _regeneratorRuntime from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/khalil/Desktop/kataleya-front/website/src/Dashboard/Pages/Orders/Orders.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, Menu, MenuItem } from '@material-ui/core';\nimport CookieService from '../../Service/CookieService';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport EditOrder from './EditOrder';\nimport Status from './Status';\nimport UserPopup from \"./UserPopup\";\nimport axios from 'axios';\nimport { IconButton } from \"@material-ui/core\";\nimport Popup from 'reactjs-popup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Orders = () => {\n  _s();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        Orders = _useState2[0],\n        setOrders = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        Status = _useState4[0],\n        setStatus = _useState4[1];\n\n  const _useState5 = useState({}),\n        _useState6 = _slicedToArray(_useState5, 2),\n        StatusData = _useState6[0],\n        setStatusData = _useState6[1];\n\n  const _useState7 = useState(true),\n        _useState8 = _slicedToArray(_useState7, 2),\n        Loading = _useState8[0],\n        setLoading = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        Editing = _useState10[0],\n        setEditing = _useState10[1];\n\n  const _useState11 = useState({}),\n        _useState12 = _slicedToArray(_useState11, 2),\n        OrderData = _useState12[0],\n        setOrderData = _useState12[1];\n\n  const _useState13 = useState({\n    display: 'None',\n    color: 'red'\n  }),\n        _useState14 = _slicedToArray(_useState13, 2),\n        display = _useState14[0],\n        setdisplay = _useState14[1];\n\n  const _useState15 = useState(\"none\"),\n        _useState16 = _slicedToArray(_useState15, 2),\n        message = _useState16[0],\n        setmessage = _useState16[1];\n\n  const _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        anchorEl = _React$useState2[0],\n        setAnchorEl = _React$useState2[1];\n\n  const Add = Status.map(Add => Add);\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const buttonClick = e => {\n    setStatus(e.target.value);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const useStyles = makeStyles(theme => ({\n    ordersTable: {\n      color: 'green',\n      position: 'absolute',\n      zIndex: '0',\n      width: '70%',\n      height: '70vh',\n      marginTop: '1%',\n      marginLeft: '15%'\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: 'green'\n    },\n    manageadmins: {\n      /* backgroundColor: \"rgba(116, 255, 116, 0.145)\", */\n      height: '86vh'\n    }\n  }));\n  const ordersTable = useStyles();\n  const cookie = CookieService.get('Bearer');\n\n  const HandleEdit = () => {\n    setEditing(!Editing);\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    var config = {\n      method: 'get',\n      url: 'http://localhost:8000/api/admin/order',\n      headers: {\n        'Authorization': \"Bearer \".concat(cookie),\n        'Content-Type': 'application/form-data'\n      }\n    };\n    axios(config).then(res => {\n      setOrders(res.data.map((item, index) => {\n        return _objectSpread(_objectSpread({}, item), {}, {\n          delete: {\n            id: item.id\n          },\n          edit: {\n            id: item.id,\n            index: index\n          }\n          /* image   : linkkk + item.picture, */\n\n        });\n      }));\n      setLoading(false);\n    }).catch(err => {\n      console.log(err.request);\n    }); // var choice ={ method: 'get',\n    // url: \"http://localhost:8000/api/admin/status\",\n    // headers: { \n    //   'Authorization': `Bearer ${cookie}`, \n    //   'Content-Type': 'application/form-data'\n    // }};\n    // axios(choice)\n    // .then(res => {\n    //         setStatus(res.data.map((key, val)=>  \n    //           {return {\n    //               ...key,\n    //               delete: {id: key.id},\n    //               edit: {id: key.id, val: val },\n    //               /* image   : linkkk + key.picture, */\n    //           }}));\n    //           setLoading(false)\n    // }).catch(err => {\n    //   console.log(err.request)\n    // });\n  }, []); // useEffect(() => {\n  //   axios.get(\"http://localhost:8000/api/admin/status\", {\n  //       headers: { \n  //           'Authorization': `Bearer ${cookie}`, \n  //           'Content-Type': 'application/form-data'\n  //         },\n  //   }).then((response) => {\n  //     setStatus(response.data);\n  //   });\n  // }, []);\n\n  console.log(Status);\n  console.log(Orders);\n\n  const DeleteOrder = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var config;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            config = {\n              method: 'Delete',\n              url: \"http://localhost:8000/api/admin/order/\".concat(id),\n              headers: {\n                'Authorization': \"Bearer \".concat(cookie),\n                'Content-Type': 'application/x-www-form-urlencoded'\n              }\n            };\n            axios(config).then(res => {\n              setmessage(\"Order has been Deleted\");\n              setdisplay({\n                display: 'inline',\n                color: 'green'\n              });\n              /* props.Edit() */\n\n              window.location.replace(\"/admin/ManageOrders\");\n              setOrders(res.data.map(item => {\n                return _objectSpread(_objectSpread({}, item), {}, {\n                  delete: item.id,\n                  edit: item.id\n                  /* image   : linkkk + item.picture */\n\n                });\n              }));\n            }).catch(err => {\n              console.log(err.request);\n            });\n            /* axios(config2)\n            .then(res => {\n                   }).catch(err => {\n              console.log(err.request)\n            }) */\n\n            setLoading(false);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function DeleteOrder(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const columns = [{\n    field: 'id',\n    headerName: 'ID',\n    width: 150\n  }, {\n    field: 'overall_price',\n    headerName: 'Total Price',\n    width: 160\n  }, {\n    field: 'order_date',\n    headerName: 'Ordered At',\n    width: 170\n  }, {\n    field: 'shipped_date',\n    headerName: 'Expected Arrival',\n    width: 170\n  }, {\n    field: 'customer',\n    headerName: 'Customer',\n    width: 170,\n    renderCell: params => /*#__PURE__*/_jsxDEV(Popup, {\n      trigger: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        size: \"small\",\n        alt: \"Remy Sharp\",\n        children: \"View\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 31\n      }, this),\n      modal: true,\n      nested: true,\n      position: \"right center\",\n      children: /*#__PURE__*/_jsxDEV(UserPopup, {\n        details: params.row\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }, this)\n  }, {\n    field: 'status_id',\n    headerName: 'Status',\n    sortable: false,\n    width: 170,\n    renderCell: params => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        edge: \"start\",\n        \"aria-label\": \"menu\",\n        \"aria-haspopup\": \"true\",\n        onClick: handleClick,\n        children: Status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        id: \"simple-menu\",\n        anchorEl: anchorEl,\n        keepMounted: true,\n        open: Boolean(anchorEl),\n        onClose: handleClose,\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleClose,\n          children: \"Delivering\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleClose,\n          children: \"Delivered\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: handleClose,\n          children: \"Cancelled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }, this)\n  }, {\n    field: 'edit',\n    headerName: 'Edit',\n    renderCell: params => /*#__PURE__*/_jsxDEV(Button, {\n      style: {\n        backgroundColor: '#36C14B'\n      },\n      variant: \"contained\",\n      size: \"small\",\n      alt: \"Remy Sharp\",\n      onClick: () => {\n        setOrderData(Orders[params.value.index]);\n        setEditing(true);\n      },\n      children: \"Edit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 15\n    }, this)\n  }, {\n    field: 'delete',\n    headerName: 'Delete',\n    sortable: false,\n    renderCell: params => /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => DeleteOrder(params.value.id),\n      style: {\n        backgroundColor: '#F76363'\n      },\n      variant: \"contained\",\n      size: \"small\",\n      alt: \"Remy Sharp\",\n      children: \"Delete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 15\n    }, this)\n  }];\n  console.log(HandleEdit);\n\n  if (Loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Backdrop, {\n        className: ordersTable.backdrop,\n        open: true,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"inherit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }, this);\n  }\n\n  if (Editing) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(EditOrder, {\n        OrderData: OrderData,\n        Edit: HandleEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: ordersTable.manageorders,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: ordersTable.ordersTable,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: display,\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(DataGrid, {\n          rows: Orders,\n          columns: columns,\n          pageSize: 8,\n          width: \"50rem\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(Orders, \"dK2JakuaCP8jVgJQeYtHN0DJdvs=\", true);\n\n_c = Orders;\nexport default Orders;\n\nvar _c;\n\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"sources":["/home/khalil/Desktop/kataleya-front/website/src/Dashboard/Pages/Orders/Orders.js"],"names":["React","useState","useEffect","DataGrid","makeStyles","Button","Menu","MenuItem","CookieService","Backdrop","CircularProgress","EditOrder","Status","UserPopup","axios","IconButton","Popup","Orders","setOrders","setStatus","StatusData","setStatusData","Loading","setLoading","Editing","setEditing","OrderData","setOrderData","display","color","setdisplay","message","setmessage","anchorEl","setAnchorEl","Add","map","handleClick","event","currentTarget","buttonClick","e","target","value","handleClose","useStyles","theme","ordersTable","position","zIndex","width","height","marginTop","marginLeft","backdrop","drawer","manageadmins","cookie","get","HandleEdit","config","method","url","headers","then","res","data","item","index","delete","id","edit","catch","err","console","log","request","DeleteOrder","window","location","replace","columns","field","headerName","renderCell","params","row","sortable","Boolean","backgroundColor","manageorders"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, Menu, MenuItem} from '@material-ui/core';\nimport CookieService from '../../Service/CookieService';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport EditOrder from './EditOrder';\nimport Status from './Status';\nimport UserPopup from \"./UserPopup\"\nimport axios from 'axios';\nimport { IconButton } from \"@material-ui/core\";\nimport Popup from 'reactjs-popup';\n\n\nconst Orders = () => {\n    const [Orders, setOrders] = useState([])\n    const [Status, setStatus] = useState([])\n    const [StatusData, setStatusData] = useState({})\n    const [Loading, setLoading] = useState(true)\n    const [Editing, setEditing] = useState(false)\n    const [OrderData, setOrderData] = useState({})\n    const [display, setdisplay] = useState({display: 'None', color: 'red' });\n    const [message, setmessage] = useState(\"none\");\n    const [anchorEl, setAnchorEl] = React.useState(null);\n  const Add = Status.map(Add => Add\n    )\n    const handleClick = (event) => {\n      setAnchorEl(event.currentTarget);\n    };\n    const buttonClick=(e)=>{\n      setStatus(e.target.value);\n    }\n    const handleClose = () => {\n      setAnchorEl(null);\n    };\n      const useStyles = makeStyles((theme) => ({\n          ordersTable: {\n            color: 'green',\n            position: 'absolute',\n            zIndex: '0',\n            width: '70%',\n            height: '70vh',\n            marginTop: '1%',\n            marginLeft: '15%',\n           \n          },\n          backdrop: {\n            zIndex: theme.zIndex.drawer + 1,\n            color: 'green',\n          },\n          manageadmins : {\n            /* backgroundColor: \"rgba(116, 255, 116, 0.145)\", */\n            height : '86vh',\n          }\n        }));\n      const ordersTable = useStyles();\n      const cookie = CookieService.get('Bearer');\n  \n      \n  \n     const HandleEdit = () => {\n        setEditing(!Editing)\n      }\n   \n      useEffect( () => {\n        setLoading(true)\n        var config = {\n          method: 'get',\n          url: 'http://localhost:8000/api/admin/order',\n          headers: { \n            'Authorization': `Bearer ${cookie}`, \n            'Content-Type': 'application/form-data'\n          }};\n            axios(config)\n            .then(res => {\n                    setOrders(res.data.map((item, index)=>  \n                      {return {\n                          ...item,\n                          delete: {id: item.id},\n                          edit: {id: item.id, index: index },\n                          /* image   : linkkk + item.picture, */\n                      }}));\n                      setLoading(false)\n            }).catch(err => {\n              console.log(err.request)\n            });\n            // var choice ={ method: 'get',\n            // url: \"http://localhost:8000/api/admin/status\",\n            // headers: { \n            //   'Authorization': `Bearer ${cookie}`, \n            //   'Content-Type': 'application/form-data'\n            // }};\n            // axios(choice)\n            // .then(res => {\n            //         setStatus(res.data.map((key, val)=>  \n            //           {return {\n            //               ...key,\n            //               delete: {id: key.id},\n            //               edit: {id: key.id, val: val },\n            //               /* image   : linkkk + key.picture, */\n            //           }}));\n            //           setLoading(false)\n            // }).catch(err => {\n            //   console.log(err.request)\n            // });\n        \n      },[]);\n\n      // useEffect(() => {\n      //   axios.get(\"http://localhost:8000/api/admin/status\", {\n      //       headers: { \n      //           'Authorization': `Bearer ${cookie}`, \n      //           'Content-Type': 'application/form-data'\n      //         },\n      //   }).then((response) => {\n      //     setStatus(response.data);\n      //   });\n      // }, []);\n      console.log(Status);\n      console.log(Orders);\n      const DeleteOrder = async (id) => {\n          setLoading(true);\n   \n          var config = {\n          method: 'Delete',\n          url: `http://localhost:8000/api/admin/order/${id}`,\n          headers: { \n            'Authorization': `Bearer ${cookie}`, \n            'Content-Type': 'application/x-www-form-urlencoded'\n          }};\n    \n            axios(config)\n            .then(res => {\n              setmessage(\"Order has been Deleted\")\n              setdisplay({display: 'inline', color: 'green' })\n              /* props.Edit() */\n              window.location.replace(\"/admin/ManageOrders\")\n              setOrders(res.data.map(item =>  \n                {return {\n                    ...item,\n                    delete: item.id,\n                    edit: item.id,\n                    /* image   : linkkk + item.picture */\n                }}));\n                    \n            }).catch(err => {\n              console.log(err.request)\n            })\n  \n            /* axios(config2)\n            .then(res => {\n      \n            }).catch(err => {\n              console.log(err.request)\n            }) */\n            setLoading(false)\n      }\n      const columns = [\n  \n        { field: 'id', headerName: 'ID', width:150},\n        {\n          field: 'overall_price',\n          headerName: 'Total Price',\n          width: 160,\n         \n        },\n        { field: 'order_date', headerName: 'Ordered At' , width: 170 },\n        { field: 'shipped_date', headerName: 'Expected Arrival' , width: 170 },\n        {\n          field: 'customer',\n          headerName: 'Customer',\n          width: 170,\n          renderCell: (params) => (\n          \n              <Popup trigger={<Button variant=\"contained\" size=\"small\" alt=\"Remy Sharp\">View</Button>} modal nested position=\"right center\">\n              <UserPopup details={params.row} />\n            </Popup>\n          ),\n        },\n        {\n          field:'status_id',\n          headerName: 'Status',\n          sortable: false,\n          width:170,\n          renderCell: (params) => (\n          <div><IconButton edge=\"start\" aria-label=\"menu\" aria-haspopup=\"true\" onClick={handleClick}>\n         {Status}\n        </IconButton>\n        <Menu\n          id=\"simple-menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={Boolean(anchorEl)}\n          onClose={handleClose}\n        >\n          <MenuItem onClick={handleClose}>Delivering</MenuItem>\n          <MenuItem onClick={handleClose}>Delivered</MenuItem>\n          <MenuItem onClick={handleClose}>Cancelled</MenuItem>\n        </Menu></div>\n            \n          ),\n        },\n        {\n          field: 'edit',\n          headerName: 'Edit',\n          renderCell: (params) => (\n          \n              <Button style={{backgroundColor: '#36C14B'}} variant=\"contained\" size=\"small\" alt=\"Remy Sharp\" onClick={\n                 () =>  {\n                  setOrderData(Orders[params.value.index]);\n                  setEditing(true);\n                 }}>\n                  Edit\n              </Button>\n          ),\n        },\n        {\n          field: 'delete',\n          headerName: 'Delete',\n          sortable: false,\n          renderCell: (params) => (\n              <Button onClick={()=> DeleteOrder(params.value.id)} style={{backgroundColor: '#F76363'}} variant=\"contained\" size=\"small\" alt=\"Remy Sharp\">\n                  Delete\n              </Button>\n          ),\n        },\n        \n      ];\n      console.log(HandleEdit)\n      if(Loading){\n        return (\n          <div>\n              <Backdrop className={ordersTable.backdrop} open={true}>\n                  <CircularProgress color=\"inherit\" />\n              </Backdrop>\n          </div>\n        )\n      }\n      if(Editing){\n        return (\n          <div>\n              <EditOrder OrderData={OrderData} Edit={HandleEdit} />\n          </div>\n        )\n      }else {\n    return (\n      <div className={ordersTable.manageorders} >\n      <div className={ordersTable.ordersTable} >\n      {<span style={display}>{message}</span>}\n        <DataGrid rows={Orders} columns={columns} pageSize={8} width=\"50rem\"/>\n\n      </div>\n      </div>\n    );\n      }\n}\n\nexport default Orders\n"]},"metadata":{},"sourceType":"module"}