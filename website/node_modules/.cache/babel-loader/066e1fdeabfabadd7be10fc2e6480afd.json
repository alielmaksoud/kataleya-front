{"ast":null,"code":"import _regeneratorRuntime from \"/home/ali/Documents/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ali/Documents/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { PRODUCT_LIST_REQUEST, PRODUCT_LIST_SUCCESS, PRODUCT_LIST_FAIL, PRODUCT_DETAILS_REQUEST, PRODUCT_DETAILS_SUCCESS, PRODUCT_DETAILS_FAIL, PRODUCT_SAVE_REQUEST, PRODUCT_SAVE_SUCCESS, PRODUCT_SAVE_FAIL, PRODUCT_DELETE_SUCCESS, PRODUCT_DELETE_FAIL, PRODUCT_DELETE_REQUEST, PRODUCT_REVIEW_SAVE_REQUEST, PRODUCT_REVIEW_SAVE_FAIL, PRODUCT_REVIEW_SAVE_SUCCESS } from '../constants/productConstants';\nimport axios from 'axios';\nimport Axios from 'axios';\n\nconst listProducts = (category = '', searchKeyword = '', sortOrder = '') => /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n    var _yield$axios$get, data;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          dispatch({\n            type: PRODUCT_LIST_REQUEST\n          });\n          _context.next = 4;\n          return axios.get('/api/products?category=' + category + '&searchKeyword=' + searchKeyword + '&sortOrder=' + sortOrder);\n\n        case 4:\n          _yield$axios$get = _context.sent;\n          data = _yield$axios$get.data;\n          dispatch({\n            type: PRODUCT_LIST_SUCCESS,\n            payload: data\n          });\n          _context.next = 12;\n          break;\n\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context[\"catch\"](0);\n          dispatch({\n            type: PRODUCT_LIST_FAIL,\n            payload: _context.t0.message\n          });\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 9]]);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nconst saveProduct = product => /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n    var _getState, userInfo, _yield$Axios$post, data, _yield$Axios$put;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          dispatch({\n            type: PRODUCT_SAVE_REQUEST,\n            payload: product\n          });\n          _getState = getState(), userInfo = _getState.userSignin.userInfo;\n\n          if (product._id) {\n            _context2.next = 11;\n            break;\n          }\n\n          _context2.next = 6;\n          return Axios.post('/api/products', product, {\n            headers: {\n              Authorization: 'Bearer ' + userInfo.token\n            }\n          });\n\n        case 6:\n          _yield$Axios$post = _context2.sent;\n          data = _yield$Axios$post.data;\n          dispatch({\n            type: PRODUCT_SAVE_SUCCESS,\n            payload: data\n          });\n          _context2.next = 16;\n          break;\n\n        case 11:\n          _context2.next = 13;\n          return Axios.put('/api/products/' + product._id, product, {\n            headers: {\n              Authorization: 'Bearer ' + userInfo.token\n            }\n          });\n\n        case 13:\n          _yield$Axios$put = _context2.sent;\n          data = _yield$Axios$put.data;\n          dispatch({\n            type: PRODUCT_SAVE_SUCCESS,\n            payload: data\n          });\n\n        case 16:\n          _context2.next = 21;\n          break;\n\n        case 18:\n          _context2.prev = 18;\n          _context2.t0 = _context2[\"catch\"](0);\n          dispatch({\n            type: PRODUCT_SAVE_FAIL,\n            payload: _context2.t0.message\n          });\n\n        case 21:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 18]]);\n  }));\n\n  return function (_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nconst detailsProduct = productId => /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n    var _yield$axios$get2, data;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          dispatch({\n            type: PRODUCT_DETAILS_REQUEST,\n            payload: productId\n          });\n          _context3.next = 4;\n          return axios.get('/api/products/' + productId);\n\n        case 4:\n          _yield$axios$get2 = _context3.sent;\n          data = _yield$axios$get2.data;\n          dispatch({\n            type: PRODUCT_DETAILS_SUCCESS,\n            payload: data\n          });\n          _context3.next = 12;\n          break;\n\n        case 9:\n          _context3.prev = 9;\n          _context3.t0 = _context3[\"catch\"](0);\n          dispatch({\n            type: PRODUCT_DETAILS_FAIL,\n            payload: _context3.t0.message\n          });\n\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 9]]);\n  }));\n\n  return function (_x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nconst deleteProdcut = productId => /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch, getState) {\n    var _getState2, userInfo, _yield$axios$delete, data;\n\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _getState2 = getState(), userInfo = _getState2.userSignin.userInfo;\n          dispatch({\n            type: PRODUCT_DELETE_REQUEST,\n            payload: productId\n          });\n          _context4.next = 5;\n          return axios.delete('/api/products/' + productId, {\n            headers: {\n              Authorization: 'Bearer ' + userInfo.token\n            }\n          });\n\n        case 5:\n          _yield$axios$delete = _context4.sent;\n          data = _yield$axios$delete.data;\n          dispatch({\n            type: PRODUCT_DELETE_SUCCESS,\n            payload: data,\n            success: true\n          });\n          _context4.next = 13;\n          break;\n\n        case 10:\n          _context4.prev = 10;\n          _context4.t0 = _context4[\"catch\"](0);\n          dispatch({\n            type: PRODUCT_DELETE_FAIL,\n            payload: _context4.t0.message\n          });\n\n        case 13:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 10]]);\n  }));\n\n  return function (_x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nconst saveProductReview = (productId, review) => /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch, getState) {\n    var _getState3, token, _yield$axios$post, data;\n\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _getState3 = getState(), token = _getState3.userSignin.userInfo.token;\n          dispatch({\n            type: PRODUCT_REVIEW_SAVE_REQUEST,\n            payload: review\n          });\n          _context5.next = 5;\n          return axios.post(\"/api/products/\".concat(productId, \"/reviews\"), review, {\n            headers: {\n              Authorization: 'Bearer ' + token\n            }\n          });\n\n        case 5:\n          _yield$axios$post = _context5.sent;\n          data = _yield$axios$post.data;\n          dispatch({\n            type: PRODUCT_REVIEW_SAVE_SUCCESS,\n            payload: data\n          });\n          _context5.next = 13;\n          break;\n\n        case 10:\n          _context5.prev = 10;\n          _context5.t0 = _context5[\"catch\"](0);\n          // report error\n          dispatch({\n            type: PRODUCT_REVIEW_SAVE_FAIL,\n            payload: _context5.t0.message\n          });\n\n        case 13:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 10]]);\n  }));\n\n  return function (_x7, _x8) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nexport { listProducts, detailsProduct, saveProduct, deleteProdcut, saveProductReview };","map":{"version":3,"sources":["/home/ali/Documents/website/src/actions/productActions.js"],"names":["PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","PRODUCT_LIST_FAIL","PRODUCT_DETAILS_REQUEST","PRODUCT_DETAILS_SUCCESS","PRODUCT_DETAILS_FAIL","PRODUCT_SAVE_REQUEST","PRODUCT_SAVE_SUCCESS","PRODUCT_SAVE_FAIL","PRODUCT_DELETE_SUCCESS","PRODUCT_DELETE_FAIL","PRODUCT_DELETE_REQUEST","PRODUCT_REVIEW_SAVE_REQUEST","PRODUCT_REVIEW_SAVE_FAIL","PRODUCT_REVIEW_SAVE_SUCCESS","axios","Axios","listProducts","category","searchKeyword","sortOrder","dispatch","type","get","data","payload","message","saveProduct","product","getState","userInfo","userSignin","_id","post","headers","Authorization","token","put","detailsProduct","productId","deleteProdcut","delete","success","saveProductReview","review"],"mappings":"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","sourcesContent":["import {\n  PRODUCT_LIST_REQUEST,\n  PRODUCT_LIST_SUCCESS,\n  PRODUCT_LIST_FAIL,\n  PRODUCT_DETAILS_REQUEST,\n  PRODUCT_DETAILS_SUCCESS,\n  PRODUCT_DETAILS_FAIL,\n  PRODUCT_SAVE_REQUEST,\n  PRODUCT_SAVE_SUCCESS,\n  PRODUCT_SAVE_FAIL,\n  PRODUCT_DELETE_SUCCESS,\n  PRODUCT_DELETE_FAIL,\n  PRODUCT_DELETE_REQUEST,\n  PRODUCT_REVIEW_SAVE_REQUEST,\n  PRODUCT_REVIEW_SAVE_FAIL,\n  PRODUCT_REVIEW_SAVE_SUCCESS,\n} from '../constants/productConstants';\nimport axios from 'axios';\nimport Axios from 'axios';\n\nconst listProducts = (\n  category = '',\n  searchKeyword = '',\n  sortOrder = ''\n) => async (dispatch) => {\n  try {\n    dispatch({ type: PRODUCT_LIST_REQUEST });\n    const { data } = await axios.get(\n      '/api/products?category=' +\n        category +\n        '&searchKeyword=' +\n        searchKeyword +\n        '&sortOrder=' +\n        sortOrder\n    );\n    dispatch({ type: PRODUCT_LIST_SUCCESS, payload: data });\n  } catch (error) {\n    dispatch({ type: PRODUCT_LIST_FAIL, payload: error.message });\n  }\n};\n\nconst saveProduct = (product) => async (dispatch, getState) => {\n  try {\n    dispatch({ type: PRODUCT_SAVE_REQUEST, payload: product });\n    const {\n      userSignin: { userInfo },\n    } = getState();\n    if (!product._id) {\n      const { data } = await Axios.post('/api/products', product, {\n        headers: {\n          Authorization: 'Bearer ' + userInfo.token,\n        },\n      });\n      dispatch({ type: PRODUCT_SAVE_SUCCESS, payload: data });\n    } else {\n      const { data } = await Axios.put(\n        '/api/products/' + product._id,\n        product,\n        {\n          headers: {\n            Authorization: 'Bearer ' + userInfo.token,\n          },\n        }\n      );\n      dispatch({ type: PRODUCT_SAVE_SUCCESS, payload: data });\n    }\n  } catch (error) {\n    dispatch({ type: PRODUCT_SAVE_FAIL, payload: error.message });\n  }\n};\n\nconst detailsProduct = (productId) => async (dispatch) => {\n  try {\n    dispatch({ type: PRODUCT_DETAILS_REQUEST, payload: productId });\n    const { data } = await axios.get('/api/products/' + productId);\n    dispatch({ type: PRODUCT_DETAILS_SUCCESS, payload: data });\n  } catch (error) {\n    dispatch({ type: PRODUCT_DETAILS_FAIL, payload: error.message });\n  }\n};\n\nconst deleteProdcut = (productId) => async (dispatch, getState) => {\n  try {\n    const {\n      userSignin: { userInfo },\n    } = getState();\n    dispatch({ type: PRODUCT_DELETE_REQUEST, payload: productId });\n    const { data } = await axios.delete('/api/products/' + productId, {\n      headers: {\n        Authorization: 'Bearer ' + userInfo.token,\n      },\n    });\n    dispatch({ type: PRODUCT_DELETE_SUCCESS, payload: data, success: true });\n  } catch (error) {\n    dispatch({ type: PRODUCT_DELETE_FAIL, payload: error.message });\n  }\n};\n\nconst saveProductReview = (productId, review) => async (dispatch, getState) => {\n  try {\n    const {\n      userSignin: {\n        userInfo: { token },\n      },\n    } = getState();\n    dispatch({ type: PRODUCT_REVIEW_SAVE_REQUEST, payload: review });\n    const { data } = await axios.post(\n      `/api/products/${productId}/reviews`,\n      review,\n      {\n        headers: {\n          Authorization: 'Bearer ' + token,\n        },\n      }\n    );\n    dispatch({ type: PRODUCT_REVIEW_SAVE_SUCCESS, payload: data });\n  } catch (error) {\n    // report error\n    dispatch({ type: PRODUCT_REVIEW_SAVE_FAIL, payload: error.message });\n  }\n};\n\nexport {\n  listProducts,\n  detailsProduct,\n  saveProduct,\n  deleteProdcut,\n  saveProductReview,\n};\n"]},"metadata":{},"sourceType":"module"}