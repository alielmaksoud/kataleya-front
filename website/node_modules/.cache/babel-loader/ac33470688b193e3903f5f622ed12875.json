{"ast":null,"code":"import _objectSpread from \"/home/ali/Documents/Kataleya-perfume/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/ali/Documents/Kataleya-perfume/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/ali/Documents/Kataleya-perfume/kataleya-front/website/src/Dashboard/Pages/classes-sections/ManageClass.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport CookieService from '../../Service/CookieService';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport EditStudent from './EditClass';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ManageAdmin() {\n  _s();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        Admins = _useState2[0],\n        setAdmins = _useState2[1];\n\n  const _useState3 = useState(true),\n        _useState4 = _slicedToArray(_useState3, 2),\n        Loading = _useState4[0],\n        setLoading = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        Editing = _useState6[0],\n        setEditing = _useState6[1];\n\n  const _useState7 = useState({}),\n        _useState8 = _slicedToArray(_useState7, 2),\n        AdminData = _useState8[0],\n        setAdminData = _useState8[1];\n\n  const _useState9 = useState({\n    display: 'None',\n    color: 'red'\n  }),\n        _useState10 = _slicedToArray(_useState9, 2),\n        display = _useState10[0],\n        setdisplay = _useState10[1];\n\n  const _useState11 = useState(\"none\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        message = _useState12[0],\n        setmessage = _useState12[1];\n\n  const useStyles = makeStyles(theme => ({\n    adminsTable: {\n      color: 'green',\n      position: 'absolute',\n      zIndex: '0',\n      width: '60%',\n      height: '70vh',\n      marginTop: '1%',\n      marginLeft: '5%'\n    },\n    manageclass: {\n      backgroundColor: \"rgba(116, 255, 116, 0.145)\",\n      height: '86vh',\n      textAlign: 'center'\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: 'green'\n    },\n    ballout: {\n      padding: '2%'\n    }\n  }));\n  const adminsTable = useStyles();\n  const cookie = CookieService.get('Bearer');\n\n  const HandleEdit = () => {\n    setEditing(!Editing);\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    var config = {\n      method: 'get',\n      url: 'http://localhost:8000/api/classesinfo',\n      headers: {\n        'Authorization': \"Bearer \".concat(cookie),\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    };\n    console.log(config);\n    axios(config).then(res => {\n      setAdmins(res.data.sections.map((item, index) => {\n        return _objectSpread(_objectSpread({}, item), {}, {\n          class_name: item.class_name,\n          sections: item.getsections.map(item => item.section_name).join(\", \"),\n          delete: {\n            id: item.id\n          },\n          edit: {\n            id: item.id,\n            index: index\n          }\n        });\n      }));\n      setLoading(false);\n    }).catch(err => {\n      console.log(err.request);\n    });\n  }, []);\n\n  const DeleteAdmin = id => {\n    setLoading(true);\n    var config = {\n      method: 'Delete',\n      url: \"http://localhost:8000/api/classes/\".concat(id),\n      headers: {\n        'Authorization': \"Bearer \".concat(cookie),\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    };\n    axios(config).then(res => {\n      console.log(res.data.message);\n      setmessage(res.data.message);\n      setdisplay({\n        display: 'inline',\n        color: 'red'\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    setLoading(false);\n    var config2 = {\n      method: 'get',\n      url: 'http://localhost:8000/api/classesinfo',\n      headers: {\n        'Authorization': \"Bearer \".concat(cookie),\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    };\n    axios(config2).then(res => {\n      setAdmins(res.data.sections.map((item, index) => {\n        return _objectSpread(_objectSpread({}, item), {}, {\n          class_name: item.class_name,\n          sections: item.getsections.map(item => item.section_name).join(\", \"),\n          delete: {\n            id: item.id\n          },\n          edit: {\n            id: item.id,\n            index: index\n          }\n        });\n      }));\n      setLoading(false);\n    }).catch(err => {\n      console.log(err.request);\n    });\n  };\n\n  const columns = [{\n    field: 'class_name',\n    headerName: 'Class',\n    width: 170\n  }, {\n    field: 'sections',\n    headerName: 'Sections',\n    width: 300\n  }, {\n    field: 'edit',\n    headerName: 'Edit',\n    sortable: false,\n    renderCell: params => /*#__PURE__*/_jsxDEV(Button, {\n      style: {\n        backgroundColor: '#36C14B'\n      },\n      variant: \"contained\",\n      size: \"small\",\n      alt: \"Remy Sharp\",\n      onClick: () => {\n        console.log(params);\n        setAdminData(Admins[params.value.index]);\n        setEditing(true);\n      },\n      children: \"Edit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }, this)\n  }, {\n    field: 'delete',\n    headerName: 'Delete',\n    sortable: false,\n    renderCell: params => /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => DeleteAdmin(params.value.id),\n      style: {\n        backgroundColor: '#F76363'\n      },\n      variant: \"contained\",\n      size: \"small\",\n      alt: \"Remy Sharp\",\n      children: \"Delete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }, this)\n  }];\n  console.log(Admins, \"lalaaa\");\n\n  if (Loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Backdrop, {\n        className: adminsTable.backdrop,\n        open: true,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"inherit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }, this);\n  }\n\n  if (Editing) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(EditStudent, {\n        AdminData: AdminData,\n        Edit: HandleEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: adminsTable.manageclass,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        className: adminsTable.ballout,\n        component: \"h1\",\n        variant: \"h5\",\n        children: \"Manage Classes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: display,\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: adminsTable.adminsTable,\n        children: /*#__PURE__*/_jsxDEV(DataGrid, {\n          rows: Admins,\n          columns: columns,\n          pageSize: 8\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }, this);\n  }\n}\n\n_s(ManageAdmin, \"NLaIawC66ZjAJLHrI7jro4gi9/s=\", false, function () {\n  return [useStyles];\n});\n\n_c = ManageAdmin;\nexport default ManageAdmin;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManageAdmin\");","map":{"version":3,"sources":["/home/ali/Documents/Kataleya-perfume/kataleya-front/website/src/Dashboard/Pages/classes-sections/ManageClass.js"],"names":["React","useState","useEffect","DataGrid","makeStyles","Button","CookieService","Backdrop","CircularProgress","Typography","EditStudent","axios","ManageAdmin","Admins","setAdmins","Loading","setLoading","Editing","setEditing","AdminData","setAdminData","display","color","setdisplay","message","setmessage","useStyles","theme","adminsTable","position","zIndex","width","height","marginTop","marginLeft","manageclass","backgroundColor","textAlign","backdrop","drawer","ballout","padding","cookie","get","HandleEdit","config","method","url","headers","console","log","then","res","data","sections","map","item","index","class_name","getsections","section_name","join","delete","id","edit","catch","err","request","DeleteAdmin","config2","columns","field","headerName","sortable","renderCell","params","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport CookieService from '../../Service/CookieService';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\nimport EditStudent from './EditClass';\nimport axios from 'axios';\n\n\n\n\nfunction ManageAdmin() {\n  const [Admins, setAdmins] = useState([])\n  const [Loading, setLoading] = useState(true)\n  const [Editing, setEditing] = useState(false)\n  const [AdminData, setAdminData] = useState({})\n  const [display, setdisplay] = useState({display: 'None', color: 'red' });\n  const [message, setmessage] = useState(\"none\");\n    const useStyles = makeStyles((theme) => ({\n        adminsTable: {\n          color: 'green',\n          position: 'absolute',\n          zIndex: '0',\n          width: '60%',\n          height: '70vh',\n          marginTop: '1%',\n          marginLeft: '5%',\n          \n        },\n        manageclass : {\n          backgroundColor: \"rgba(116, 255, 116, 0.145)\",\n          height:'86vh',\n          textAlign: 'center'\n\n        },\n        backdrop: {\n          zIndex: theme.zIndex.drawer + 1,\n          color: 'green',\n        },\n        ballout : {\n          padding: '2%'\n        }\n      }));\n    const adminsTable = useStyles();\n    const cookie = CookieService.get('Bearer');\n\n   const HandleEdit = () => {\n      setEditing(!Editing)\n    }\n \n    useEffect( () => {\n      setLoading(true)\n      var config = {\n        method: 'get',\n        url: 'http://localhost:8000/api/classesinfo',\n        headers: { \n          'Authorization': `Bearer ${cookie}`, \n          'Content-Type': 'application/x-www-form-urlencoded'\n        }};console.log(config);\n          axios(config)\n          .then(res => {\n   \n                  setAdmins(res.data.sections.map((item, index)=>  \n                    {return {\n                        ...item,\n                        class_name: item.class_name,\n                        sections: item.getsections.map(item => item.section_name).join(\", \"),\n                        delete: {id: item.id },\n                        edit: {id: item.id,index: index },\n                    }}));\n                    setLoading(false)\n          }).catch(err => {\n            console.log(err.request)\n          })\n    },[]);\n    const DeleteAdmin = (id) => {\n        setLoading(true)\n        var config = {\n        method: 'Delete',\n        url: `http://localhost:8000/api/classes/${id}`,\n        headers: { \n          'Authorization': `Bearer ${cookie}`, \n          'Content-Type': 'application/x-www-form-urlencoded'\n        }};\n  \n          axios(config)\n          .then(res => {\n            console.log(res.data.message)\n            setmessage(res.data.message)\n            setdisplay({display: 'inline', color: 'red' , })\n          }).catch(err => {\n            console.log(err)\n          })\n          setLoading(false)\n          var config2 = {\n            method: 'get',\n            url: 'http://localhost:8000/api/classesinfo',\n            headers: { \n              'Authorization': `Bearer ${cookie}`, \n              'Content-Type': 'application/x-www-form-urlencoded'\n            }};\n              axios(config2)\n              .then(res => {\n                      setAdmins(res.data.sections.map((item, index)=>  \n                        {return {\n                            ...item,\n                            class_name: item.class_name,\n                            sections: item.getsections.map(item => item.section_name).join(\", \"),\n                            delete: {id: item.id },\n                            edit: {id: item.id, index: index},\n                        }}));\n                        setLoading(false)\n              }).catch(err => {\n                console.log(err.request)\n              })\n    }\n    const columns = [\n\n  \n\n     \n      { field: 'class_name', headerName: 'Class', width: 170},\n      { field: 'sections', headerName: 'Sections', width: 300},\n\n      {\n        field: 'edit',\n        headerName: 'Edit',\n        sortable: false,\n\n        renderCell: (params) => (\n        \n          <Button style={{backgroundColor: '#36C14B'}} variant=\"contained\" size=\"small\" alt=\"Remy Sharp\" onClick={\n            () =>  {\n              console.log(params)\n             setAdminData(Admins[params.value.index]);\n             setEditing(true);\n            }}>\n             Edit\n         </Button>\n        ),\n      },\n      {\n        field: 'delete',\n        headerName: 'Delete',\n        sortable: false,\n\n        renderCell: (params) => (\n            <Button onClick={()=> DeleteAdmin(params.value.id)} style={{backgroundColor: '#F76363'}} variant=\"contained\" size=\"small\" alt=\"Remy Sharp\">\n                Delete\n            </Button>\n        ),\n      },\n      \n    ];\n    console.log(Admins, \"lalaaa\")\n    if(Loading){\n      return (\n        <div>\n            <Backdrop className={adminsTable.backdrop} open={true}>\n                <CircularProgress color=\"inherit\" />\n            </Backdrop>\n        </div>\n      )\n    }\n    if(Editing){\n      return (\n        <div>\n            <EditStudent AdminData={AdminData} Edit={HandleEdit} />\n        </div>\n      )\n    }else {\n  return (\n    <div className={adminsTable.manageclass}>\n        <Typography className={adminsTable.ballout} component=\"h1\" variant=\"h5\">\n          Manage Classes\n        </Typography>\n        {<span style={display}>{message}</span>}\n      <div className={adminsTable.adminsTable} >\n        <DataGrid rows={Admins} columns={columns} pageSize={8}/>\n      </div>\n    </div>\n  );\n    }\n}\n\n\nexport default ManageAdmin;"]},"metadata":{},"sourceType":"module"}