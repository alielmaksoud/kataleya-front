{"ast":null,"code":"import _regeneratorRuntime from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/khalil/Desktop/kataleya-front/website/src/containers/ProductList/Popup.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { Button } from \"@material-ui/core\";\nimport { Menu, MenuItem } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport { useForm } from \"react-hook-form\";\nimport './Product.css';\nimport axios from \"axios\";\nimport { setPageActionCreator } from '@material-ui/data-grid';\nimport CookieService from '../Service/CookieService';\nimport { green } from '@material-ui/core/colors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  table: {\n    minWidth: 60\n  },\n  tablecell: {\n    fontSize: '10pt'\n  },\n  root: {\n    flexGrow: 1\n  },\n  paper: {\n    padding: theme.spacing(2),\n    margin: 'auto'\n  },\n  image: {},\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: '100%',\n    maxHeight: '100%'\n  }\n}));\nexport default function ComplexGrid(props) {\n  _s();\n\n  const _useForm = useForm(),\n        register = _useForm.register,\n        handleSubmit = _useForm.handleSubmit,\n        reset = _useForm.reset;\n\n  const _props$details = props.details,\n        id = _props$details.id,\n        image = _props$details.image,\n        name = _props$details.name,\n        description = _props$details.description,\n        is_offer = _props$details.is_offer;\n  const rate = props.rate;\n  const item_attributes = props.item_attributes;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        CartId = _useState2[0],\n        setCartId = _useState2[1];\n\n  const _useState3 = useState({\n    display: 'None',\n    color: 'red'\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        display = _useState4[0],\n        setdisplay = _useState4[1];\n\n  const _useState5 = useState(\"Item couldn't be added\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        message = _useState6[0],\n        setmessage = _useState6[1]; // const[ItemId,setItemId]=useState([]);\n\n\n  const cookie = CookieService.get('Bearer');\n  const ItemId = id;\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        Verified = _useState8[0],\n        setVerified = _useState8[1];\n\n  console.log(item_attributes);\n\n  const _useState9 = useState(item_attributes[0].price),\n        _useState10 = _slicedToArray(_useState9, 2),\n        price = _useState10[0],\n        setPrice = _useState10[1];\n\n  const _useState11 = useState(item_attributes[0].offer_price),\n        _useState12 = _slicedToArray(_useState11, 2),\n        offer = _useState12[0],\n        setOffer = _useState12[1];\n\n  const _useState13 = useState(item_attributes[0].bottle_size),\n        _useState14 = _slicedToArray(_useState13, 2),\n        size = _useState14[0],\n        setSize = _useState14[1];\n\n  useEffect(() => {\n    var config = {\n      method: 'get',\n      url: 'http://127.0.0.1:8000/api/user/cart',\n      headers: {\n        'Authorization': \"Bearer \".concat(cookie),\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    };\n    axios(config)\n    /*       second way: axios.get('http://localhost:8000/api/homeitem',) */\n    .then(res => {\n      console.log(res.data.id, \"adasdasdasd\");\n      setCartId(res.data.id);\n    }).catch(err => {\n      console.log(err.request);\n    });\n  }, []);\n  useEffect(() => {\n    var configg = {\n      method: 'post',\n      url: 'http://localhost:8000/api/user/verify',\n      headers: {\n        'Authorization': \"Bearer \".concat(cookie),\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    };\n    axios(configg).then(res => {\n      if (res.data.message === \"Verified\") {\n        setVerified(\"true\");\n      } else {\n        setVerified(\"error\");\n      }\n    }).catch(err => {\n      console.log(err.request);\n      setVerified(\"error\");\n    });\n  });\n  console.log(CartId);\n\n  const Submit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!(Verified === \"true\")) {\n              _context.next = 16;\n              break;\n            }\n\n            data = new FormData();\n            data.append(\"item_id\", ItemId);\n            data.append(\"cart_id\", CartId); //data.append(\"price\", price);\n\n            is_offer ? data.append(\"price\", offer * rate) : data.append(\"price\", price * rate);\n            data.append(\"bottle_size\", size);\n            _context.prev = 6;\n            _context.next = 9;\n            return axios.post(\"http://localhost:8000/api/user/cartItem\", data, {\n              headers: {\n                'Authorization': \"Bearer \".concat(cookie),\n                'Content-Type': 'application/x-www-form-urlencoded'\n              }\n            }).then(response => {\n              setmessage(name + \" has been added\");\n              setdisplay({\n                display: 'inline',\n                color: 'green'\n              });\n              console.log(response.data);\n            });\n\n          case 9:\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](6);\n            console.log(_context.t0);\n\n          case 14:\n            _context.next = 17;\n            break;\n\n          case 16:\n            window.alert(\"you must sign in to add to cart\");\n\n          case 17:\n            ;\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[6, 11]]);\n    }));\n\n    return function Submit() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const classes = useStyles();\n\n  const _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        anchorEl = _React$useState2[0],\n        setAnchorEl = _React$useState2[1];\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n    Submit();\n  };\n\n  const handleChangeSize = event => {\n    const pickedAttributes = item_attributes.filter(item => item.id == event.target.value);\n    setSize(pickedAttributes[0].bottle_size);\n    setPrice(pickedAttributes[0].price);\n    setOffer(pickedAttributes[0].offer_price);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.paper,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          className: classes.image,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: classes.img,\n            alt: \"complex\",\n            src: \"http://localhost:8000/storage/\".concat(image)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sm: true,\n          container: true,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: true,\n            container: true,\n            direction: \"column\",\n            spacing: 2,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: true,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                variant: \"body1\",\n                gutterBottom: true,\n                children: name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                gutterBottom: true,\n                children: description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                variant: \"body1\",\n                gutterBottom: true,\n                children: \"choose Size\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                id: \"bottle_size\",\n                select: true // label=\"Category\"\n                ,\n                onChange: handleChangeSize\n                /* defaultValue={item_attributes[0].id} */\n                ,\n                name: \"bottle_size\",\n                inputRef: register,\n                SelectProps: {\n                  native: true\n                },\n                helperText: \"\",\n                variant: \"outlined\",\n                children: item_attributes.map(option => {\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: option.id,\n                    children: option.bottle_size\n                  }, option.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 21\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 15\n              }, this), is_offer ? /*#__PURE__*/_jsxDEV(Typography, {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                variant: \"body1\",\n                gutterBottom: true,\n                children: [\"Price: \", /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"offer\",\n                  children: [price * rate, \" LBP\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 22\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 16\n                }, this), \"Offer Price: \", offer * rate, \" LBP\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 15\n              }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                variant: \"body1\",\n                gutterBottom: true,\n                children: [\"Price: \", price * rate, \" LBP\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 31\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: display,\n                children: message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 16\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"buttonn\",\n              style: {\n                alignSelf: \"center\",\n                width: \"50%\",\n                color: \"black\",\n                backgroundColor: \"lightgray\"\n              },\n              edge: \"start\",\n              \"aria-label\": \"menu\",\n              \"aria-haspopup\": \"true\",\n              onClick: handleClick,\n              children: \"Add To Cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 10\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ComplexGrid, \"8GrlfuysDCSc8mEaXG+cPb6TMo4=\", false, function () {\n  return [useForm, useStyles];\n});\n\n_c = ComplexGrid;\n\nvar _c;\n\n$RefreshReg$(_c, \"ComplexGrid\");","map":{"version":3,"sources":["/home/khalil/Desktop/kataleya-front/website/src/containers/ProductList/Popup.js"],"names":["React","useEffect","useState","makeStyles","Grid","Paper","Typography","Button","Menu","MenuItem","TextField","useForm","axios","setPageActionCreator","CookieService","green","useStyles","theme","table","minWidth","tablecell","fontSize","root","flexGrow","paper","padding","spacing","margin","image","img","display","maxWidth","maxHeight","ComplexGrid","props","register","handleSubmit","reset","details","id","name","description","is_offer","rate","item_attributes","CartId","setCartId","color","setdisplay","message","setmessage","cookie","get","ItemId","Verified","setVerified","console","log","price","setPrice","offer_price","offer","setOffer","bottle_size","size","setSize","config","method","url","headers","then","res","data","catch","err","request","configg","Submit","FormData","append","post","response","window","alert","classes","anchorEl","setAnchorEl","handleClose","handleClick","event","currentTarget","handleChangeSize","pickedAttributes","filter","item","target","value","fontWeight","native","map","option","alignSelf","width","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { Button } from \"@material-ui/core\";\nimport {Menu, MenuItem} from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport { useForm } from \"react-hook-form\";\nimport './Product.css';\nimport axios from \"axios\";\nimport { setPageActionCreator } from '@material-ui/data-grid';\nimport CookieService from '../Service/CookieService';\nimport { green } from '@material-ui/core/colors';\n\n\nconst useStyles = makeStyles((theme) => ({\n  table: {\n    minWidth: 60,\n  },\n  tablecell: {\n    fontSize: '10pt'\n},\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    margin: 'auto',\n\n  },\n\n  image: {\n    \n  },\n\n  img: {\n    margin: 'auto',\n    display: 'block',\n    maxWidth: '100%',\n    maxHeight: '100%',\n  },\n}));\n\nexport default function ComplexGrid(props) {\nconst { register , handleSubmit, reset } = useForm();\nconst { id, image, name, description, is_offer} = props.details\nconst {rate}=props\nconst {item_attributes}=props\nconst[CartId,setCartId]=useState([]);\nconst [display, setdisplay] = useState({display: 'None', color: 'red' });\n  const [message, setmessage] = useState(\"Item couldn't be added\");\n// const[ItemId,setItemId]=useState([]);\nconst cookie = CookieService.get('Bearer');\nconst ItemId=id;\nconst [Verified, setVerified ] = useState(\"\");\n console.log(item_attributes)\n  const [price, setPrice] = useState(item_attributes[0].price)\n  const [offer, setOffer] = useState(item_attributes[0].offer_price)\n  const[size,setSize]=useState(item_attributes[0].bottle_size)\n  \n  useEffect( () => {\n\n    var config = {\n      method: 'get',\n     url: 'http://127.0.0.1:8000/api/user/cart',\n      headers: { \n      'Authorization': `Bearer ${cookie}`, \n      'Content-Type': 'application/x-www-form-urlencoded'\n    }};\n\n        axios(config)\n /*       second way: axios.get('http://localhost:8000/api/homeitem',) */\n        .then(res => {\n          console.log(res.data.id,\"adasdasdasd\");\n              setCartId(res.data.id)\n\n        }).catch(err => {\n          console.log(err.request)\n        })\n        \n  },[]);\n\n  useEffect(() => {\n    var configg = {\n      method: 'post',\n      url: 'http://localhost:8000/api/user/verify',\n      headers: { \n        'Authorization': `Bearer ${cookie}`, \n        'Content-Type': 'application/x-www-form-urlencoded'\n      }};\n\n        axios(configg)\n        .then(res => {\n            if(res.data.message === \"Verified\"){\n                setVerified(\"true\");\n            }else {\n              setVerified(\"error\");\n            }\n        }).catch(err => {\n          console.log(err.request)\n          setVerified(\"error\");\n        })\n    \n  });\n  console.log(CartId);\n\n  \n\n    const Submit = async () => {\n      if(Verified === \"true\"){\n      const data = new FormData();\n      data.append(\"item_id\", ItemId);\n      data.append(\"cart_id\", CartId);\n      //data.append(\"price\", price);\n      {is_offer ? \n        data.append(\"price\", offer*rate)\n       \n         :data.append(\"price\",price*rate);\n      }\n      data.append(\"bottle_size\",size);\n      \n      try {\n        await axios.post(\"http://localhost:8000/api/user/cartItem\", data, {\n          headers: { \n            'Authorization': `Bearer ${cookie}`, \n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        }).then((response) => {\n          setmessage(name + \" has been added\")\n          setdisplay({display: 'inline', color: 'green' })\n          console.log(response.data);\n         \n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }else{\n      window.alert(\"you must sign in to add to cart\");\n    };\n    \n} ;\n\n \n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const handleClose = () => {\n        setAnchorEl(null);\n      };\n  const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n        Submit();\n\n      };\n\nconst handleChangeSize = (event) => {\n  const pickedAttributes= (item_attributes.filter((item) => item.id == event.target.value))\n    setSize(pickedAttributes[0].bottle_size)\n    setPrice(pickedAttributes[0].price)\n    setOffer(pickedAttributes[0].offer_price)\n\n    }\n\n    \n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <Grid container spacing={2}>\n          <Grid item className={classes.image}>\n          <img className={classes.img} alt=\"complex\" src= {`http://localhost:8000/storage/${image}`} />\n          </Grid>\n          <Grid item xs={12} sm container>\n            <Grid item xs container direction=\"column\" spacing={2}>\n              <Grid item xs>\n              <Typography  style={ {fontWeight:\"bold\"}} variant=\"body1\" gutterBottom>\n                  {name}\n                </Typography>\n                <Typography variant=\"body2\" gutterBottom>\n                  {description}\n                </Typography>\n                \n               \n              </Grid>\n              <div>\n           {/*  <Button style={{ alignSelf:\"center\", width:\"100%\", color:\"black\", backgroundColor:\"lightgray\" }} edge=\"start\" aria-label=\"menu\" aria-haspopup=\"true\" onClick={handleClick}>\n             Choose Bottle Size\n            </Button> */}\n            <Typography  style={ {fontWeight:\"bold\"}} variant=\"body1\" gutterBottom>\n                  choose Size\n            </Typography>\n              <TextField\n                id=\"bottle_size\"\n                select\n                // label=\"Category\"\n                onChange={handleChangeSize}\n                /* defaultValue={item_attributes[0].id} */\n                name=\"bottle_size\"\n                inputRef={register}\n                SelectProps={{\n                native: true,\n                }}\n                helperText=\"\"\n                variant=\"outlined\"\n              >\n                  {item_attributes.map((option) => {\n                    return (\n                    <option key={option.id} value={option.id}>\n                      {option.bottle_size}\n                    </option>\n                    )}\n                  )}\n              </TextField>\n              \n              {is_offer ? \n              <Typography  style={ {fontWeight:\"bold\"}} variant=\"body1\" gutterBottom>\n               \n              Price: <div className=\"offer\">{price*rate} LBP</div> \n               <br></br>\n              Offer Price: {offer*rate} LBP\n              </Typography> : <Typography  style={ {fontWeight:\"bold\"}} variant=\"body1\" gutterBottom>\n                  Price: {price*rate} LBP\n              </Typography>}\n              {<span style={display}>{message}</span>}\n              <br/>\n        </div>\n        \n         <Button className=\"buttonn\"  style={{ alignSelf:\"center\", width:\"50%\", color:\"black\", backgroundColor:\"lightgray\" }} edge=\"start\" aria-label=\"menu\" aria-haspopup=\"true\" onClick={handleClick}>\n             Add To Cart\n        </Button>\n\n            </Grid>\n          </Grid>\n        </Grid>\n      </Paper>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}