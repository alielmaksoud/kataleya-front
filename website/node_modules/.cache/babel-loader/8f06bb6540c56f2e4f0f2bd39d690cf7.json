{"ast":null,"code":"import _regeneratorRuntime from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/khalil/Desktop/kataleya-front/website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/khalil/Desktop/kataleya-front/website/src/Dashboard/Pages/Messages/ManageMessages.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport CookieService from '../../Service/CookieService';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ManageMessages = () => {\n  _s();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        Messages = _useState2[0],\n        setMessages = _useState2[1];\n\n  const _useState3 = useState(true),\n        _useState4 = _slicedToArray(_useState3, 2),\n        Loading = _useState4[0],\n        setLoading = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        Editing = _useState6[0],\n        setEditing = _useState6[1];\n\n  const _useState7 = useState({\n    display: 'None',\n    color: 'red'\n  }),\n        _useState8 = _slicedToArray(_useState7, 2),\n        display = _useState8[0],\n        setdisplay = _useState8[1];\n\n  const _useState9 = useState(\"none\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        message = _useState10[0],\n        setmessage = _useState10[1];\n\n  const useStyles = makeStyles(theme => ({\n    messagesTable: {\n      color: 'green',\n      position: 'absolute',\n      zIndex: '0',\n      width: '70%',\n      height: '70vh',\n      marginTop: '1%',\n      marginLeft: '15%'\n    },\n    backdrop: {\n      zIndex: theme.zIndex.drawer + 1,\n      color: 'green'\n    },\n    manageadmins: {\n      /* backgroundColor: \"rgba(116, 255, 116, 0.145)\", */\n      height: '86vh'\n    }\n  }));\n  const messagesTable = useStyles();\n  const cookie = CookieService.get('Bearer');\n\n  const HandleEdit = () => {\n    setEditing(!Editing);\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    var config = {\n      method: 'get',\n      url: 'http://127.0.0.1:8000/api/admin/messages',\n      headers: {\n        'Authorization': \"Bearer \".concat(cookie),\n        'Content-Type': 'application/form-data'\n      }\n    };\n    axios(config).then(res => {\n      setMessages(res.data.map((item, index) => {\n        return _objectSpread(_objectSpread({}, item), {}, {\n          delete: {\n            id: item.id\n          },\n          edit: {\n            id: item.id,\n            index: index\n          }\n          /* image   : linkkk + item.picture, */\n\n        });\n      }));\n      setLoading(false);\n    }).catch(err => {\n      console.log(err.request);\n    });\n  }, []);\n  console.log(Messages);\n\n  const DeleteMessage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var config;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            config = {\n              method: 'Delete',\n              url: \"http://localhost:8000/api/admin/messages/\".concat(id),\n              headers: {\n                'Authorization': \"Bearer \".concat(cookie),\n                'Content-Type': 'application/x-www-form-urlencoded'\n              }\n            };\n            axios(config).then(res => {\n              setmessage(\"Message has been Deleted\");\n              setdisplay({\n                display: 'inline',\n                color: 'green'\n              });\n              /* props.Edit() */\n\n              window.location.replace(\"/admin/ManageMessages\");\n              setMessages(res.data.map(item => {\n                return _objectSpread(_objectSpread({}, item), {}, {\n                  delete: item.id,\n                  edit: item.id\n                  /* image   : linkkk + item.picture */\n\n                });\n              }));\n            }).catch(err => {\n              console.log(err.request);\n            });\n            /* axios(config2)\n            .then(res => {\n                   }).catch(err => {\n              console.log(err.request)\n            }) */\n\n            setLoading(false);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n\n    return function DeleteMessage(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const columns = [{\n    field: 'id',\n    headerName: 'ID',\n    width: 150\n  }, {\n    field: 'name',\n    headerName: 'Name',\n    width: 160\n  }, {\n    field: 'email',\n    headerName: 'Email',\n    width: 170\n  }, {\n    field: 'content',\n    headerName: 'message',\n    width: 170\n  }, {\n    field: 'title',\n    headerName: 'title',\n    width: 170\n  }, {\n    field: 'delete',\n    headerName: 'Delete',\n    sortable: false,\n    renderCell: params => /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => DeleteMessage(params.value.id),\n      style: {\n        backgroundColor: '#F76363'\n      },\n      variant: \"contained\",\n      size: \"small\",\n      alt: \"Remy Sharp\",\n      children: \"Delete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }, this)\n  }];\n  console.log(HandleEdit);\n\n  if (Loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Backdrop, {\n        className: messagesTable.backdrop,\n        open: true,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          color: \"inherit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: messagesTable.managemessages,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: messagesTable.messagesTable,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: display,\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(DataGrid, {\n        rows: Messages,\n        columns: columns,\n        pageSize: 8\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 7\n  }, this);\n};\n\n_s(ManageMessages, \"TmtZmi4zjEITA5sq0CPxqFXknhI=\", true);\n\n_c = ManageMessages;\nexport default ManageMessages;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManageMessages\");","map":{"version":3,"sources":["/home/khalil/Desktop/kataleya-front/website/src/Dashboard/Pages/Messages/ManageMessages.js"],"names":["React","useState","useEffect","DataGrid","makeStyles","Button","CookieService","Backdrop","CircularProgress","axios","ManageMessages","Messages","setMessages","Loading","setLoading","Editing","setEditing","display","color","setdisplay","message","setmessage","useStyles","theme","messagesTable","position","zIndex","width","height","marginTop","marginLeft","backdrop","drawer","manageadmins","cookie","get","HandleEdit","config","method","url","headers","then","res","data","map","item","index","delete","id","edit","catch","err","console","log","request","DeleteMessage","window","location","replace","columns","field","headerName","sortable","renderCell","params","value","backgroundColor","managemessages"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport CookieService from '../../Service/CookieService';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport axios from 'axios';\n\n\n\nconst ManageMessages = () => {\n    const [Messages, setMessages] = useState([])\n    const [Loading, setLoading] = useState(true)\n    const [Editing, setEditing] = useState(false)\n    const [display, setdisplay] = useState({display: 'None', color: 'red' });\n    const [message, setmessage] = useState(\"none\");\n      const useStyles = makeStyles((theme) => ({\n          messagesTable: {\n            color: 'green',\n            position: 'absolute',\n            zIndex: '0',\n            width: '70%',\n            height: '70vh',\n            marginTop: '1%',\n            marginLeft: '15%',\n           \n          },\n          backdrop: {\n            zIndex: theme.zIndex.drawer + 1,\n            color: 'green',\n          },\n          manageadmins : {\n            /* backgroundColor: \"rgba(116, 255, 116, 0.145)\", */\n            height : '86vh',\n          }\n        }));\n      const messagesTable = useStyles();\n      const cookie = CookieService.get('Bearer');\n  \n      \n  \n     const HandleEdit = () => {\n        setEditing(!Editing)\n      }\n   \n      useEffect( () => {\n        setLoading(true)\n        var config = {\n          method: 'get',\n          url: 'http://127.0.0.1:8000/api/admin/messages',\n          headers: { \n            'Authorization': `Bearer ${cookie}`, \n            'Content-Type': 'application/form-data'\n          }};\n            axios(config)\n            .then(res => {\n                    setMessages(res.data.map((item, index)=>  \n                      {return {\n                          ...item,\n                          delete: {id: item.id},\n                          edit: {id: item.id, index: index },\n                          /* image   : linkkk + item.picture, */\n                      }}));\n                      setLoading(false)\n            }).catch(err => {\n              console.log(err.request)\n            })\n      },[]);\n      console.log(Messages)\n      const DeleteMessage = async (id) => {\n          setLoading(true);\n   \n          var config = {\n          method: 'Delete',\n          url: `http://localhost:8000/api/admin/messages/${id}`,\n          headers: { \n            'Authorization': `Bearer ${cookie}`, \n            'Content-Type': 'application/x-www-form-urlencoded'\n          }};\n    \n            axios(config)\n            .then(res => {\n              setmessage(\"Message has been Deleted\")\n              setdisplay({display: 'inline', color: 'green' })\n              /* props.Edit() */\n              window.location.replace(\"/admin/ManageMessages\")\n              setMessages(res.data.map(item =>  \n                {return {\n                    ...item,\n                    delete: item.id,\n                    edit: item.id,\n                    /* image   : linkkk + item.picture */\n                }}));\n                    \n            }).catch(err => {\n              console.log(err.request)\n            })\n  \n            /* axios(config2)\n            .then(res => {\n      \n            }).catch(err => {\n              console.log(err.request)\n            }) */\n            setLoading(false)\n      }\n      const columns = [\n  \n        { field: 'id', headerName: 'ID', width:150},\n        {\n          field: 'name',\n          headerName: 'Name',\n          width: 160,\n         \n        },\n        { field: 'email', headerName: 'Email' , width: 170 },\n        { field: 'content', headerName: 'message' , width: 170 },\n        { field: 'title', headerName: 'title' , width: 170 },\n        {\n          field: 'delete',\n          headerName: 'Delete',\n          sortable: false,\n          renderCell: (params) => (\n              <Button onClick={()=> DeleteMessage(params.value.id)} style={{backgroundColor: '#F76363'}} variant=\"contained\" size=\"small\" alt=\"Remy Sharp\">\n                  Delete\n              </Button>\n          ),\n        },\n        \n      ];\n      console.log(HandleEdit)\n      if(Loading){\n        return (\n          <div>\n              <Backdrop className={messagesTable.backdrop} open={true}>\n                  <CircularProgress color=\"inherit\" />\n              </Backdrop>\n          </div>\n        )\n      }\n     \n    return (\n      <div className={messagesTable.managemessages} >\n      <div className={messagesTable.messagesTable} >\n      {<span style={display}>{message}</span>}\n        <DataGrid rows={Messages} columns={columns} pageSize={8}/>\n      </div>\n      </div>\n    );\n      \n}\n\nexport default ManageMessages\n"]},"metadata":{},"sourceType":"module"}